---

title: "某小黄油的存档破解"
date: 2018-08-30
layout: post
tags:
  - 日记
  - 随便写写
  - 游戏破解
---

> 近来闲得无聊下载了群里的某款~~小黄油~~游戏，无奈游戏bug太多加上本身操控系统并不太好始终没有通关所以起了破解这款游戏存档的念头。

首先我们需要找到游戏存档的目录，一般而言游戏会将存档存放在游戏本身安装的目录下，而使用flash引擎和unity3d引擎的游戏会将存档存放在`C:\Users\<用户名>\AppData\LocalLow\<游戏公司>\<游戏名>`目录下。在我打开`C:\Users\<用户名>\AppData\LocalLow\<游戏公司>\<游戏名>`以后找到目录下有一个名为defaultFile.txt的文件，打开后可以看到`~ Hound_CG1`等字样，如图![/media/files/2018/08/30/defaultFile](/media/files/2018/08/30/defaultFile.png)

其中我们可以看到多次出现以`7B7E`开头的段落，也就是ASCII码的`~｛`，现在我们将游戏重置后与解锁一个CG的defaultFile.txt进行简单的对比。![/media/files/2018/08/30/defaultFile2](/media/files/2018/08/30/defaultFile2.png)

我们可以看到`~ Hound_CG1`等字样没有了，但是文件依然是以`7E`开头且顺序与原来不一样。我们大胆假设游戏中的defaultFile.txt以一个名为node的结构体或者对象组成，其中以`7E`表示一个结构体的开始，以`7B`结尾。（末尾也是以7B结尾我们可以大概确定文件结构了）

再来看空存档中的前两个分割出来的块，如图所示![/media/files/2018/08/30/defaultFile3](/media/files/2018/08/30/defaultFile3.png)

可以看到progress与continue字样，可能是游戏中的全局存档与自动存档点，并且都是以`7E08`开头的，与下面的`7E0N`的并不一样，但是也有重复的地方。再对比两幅图的progress字段，我们发现空存档在`7B`前是`00 00 00 00 00`，而在保存一个CG以后结果变为了`07 00 00 00`将其改为`20 00 00 00`以后我们启动游戏便可以跳过关卡了！然后我们进一步将`20`改为`FF`即可得到最终进度（改为`FF FF FF FF`连原本的存档都没了，应该是使用了int类型吧？）。至于CG，这类游戏只需要躺尸就可以得到啦！23333（因为游戏本身的CG存档需要包含与CG名称相关的字段，但是破解起来会花更多的时间，与其浪费时间破解不如在游戏里多玩玩的好）
